import 'package:flutter/material.dart';\nimport '../services/food_service.dart';\nimport '../models/food_item.dart';\n\nclass AdminFoodTab extends StatefulWidget {\n  final FoodService foodService;\n\n  const AdminFoodTab({super.key, required this.foodService});\n\n  @override\n  State<AdminFoodTab> createState() => _AdminFoodTabState();\n}\n\nclass _AdminFoodTabState extends State<AdminFoodTab> {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: ListView.builder(\n        padding: const EdgeInsets.all(16),\n        itemCount: widget.foodService.foodItems.length,\n        itemBuilder: (context, index) {\n          final item = widget.foodService.foodItems[index];\n          return Card(\n            margin: const EdgeInsets.only(bottom: 12),\n            child: ListTile(\n              leading: Container(\n                width: 50,\n                height: 50,\n                decoration: BoxDecoration(\n                  color: Colors.grey[200],\n                  borderRadius: BorderRadius.circular(8),\n                ),\n                child: Icon(\n                  Icons.fastfood,\n                  color: Colors.grey[400],\n                ),\n              ),\n              title: Text(\n                item.name,\n                style: const TextStyle(fontWeight: FontWeight.bold),\n              ),\n              subtitle: Column(\n                crossAxisAlignment: CrossAxisAlignment.start,\n                children: [\n                  Text(item.category),\n                  Text(\n                    '\$${item.price.toStringAsFixed(2)}',\n                    style: const TextStyle(\n                      color: Colors.orange,\n                      fontWeight: FontWeight.bold,\n                    ),\n                  ),\n                ],\n              ),\n              trailing: Row(\n                mainAxisSize: MainAxisSize.min,\n                children: [\n                  Switch(\n                    value: item.isAvailable,\n                    onChanged: (value) {\n                      setState(() {\n                        widget.foodService.toggleAvailability(item.id);\n                      });\n                    },\n                  ),\n                  IconButton(\n                    icon: const Icon(Icons.edit),\n                    onPressed: () {\n                      _showEditDialog(item);\n                    },\n                  ),\n                  IconButton(\n                    icon: const Icon(Icons.delete),\n                    color: Colors.red,\n                    onPressed: () {\n                      _showDeleteConfirmation(item);\n                    },\n                  ),\n                ],\n              ),\n            ),\n          );\n        },\n      ),\n      floatingActionButton: FloatingActionButton.extended(\n        onPressed: _showAddDialog,\n        icon: const Icon(Icons.add),\n        label: const Text('Add Product'),\n      ),\n    );\n  }\n\n  void _showAddDialog() {\n    final nameController = TextEditingController();\n    final descController = TextEditingController();\n    final priceController = TextEditingController();\n    final categoryController = TextEditingController();\n\n    showDialog(\n      context: context,\n      builder: (context) => AlertDialog(\n        title: const Text('Add New Product'),\n        content: SingleChildScrollView(\n          child: Column(\n            mainAxisSize: MainAxisSize.min,\n            children: [\n              TextField(\n                controller: nameController,\n                decoration: const InputDecoration(labelText: 'Name'),\n              ),\n              TextField(\n                controller: descController,\n                decoration: const InputDecoration(labelText: 'Description'),\n                maxLines: 2,\n              ),\n              TextField(\n                controller: priceController,\n                decoration: const InputDecoration(labelText: 'Price'),\n                keyboardType: TextInputType.number,\n              ),\n              TextField(\n                controller: categoryController,\n                decoration: const InputDecoration(labelText: 'Category'),\n              ),\n            ],\n          ),\n        ),\n        actions: [\n          TextButton(\n            onPressed: () => Navigator.pop(context),\n            child: const Text('Cancel'),\n          ),\n          TextButton(\n            onPressed: () {\n              if (nameController.text.isNotEmpty &&\n                  priceController.text.isNotEmpty) {\n                final newItem = FoodItem(\n                  id: DateTime.now().millisecondsSinceEpoch.toString(),\n                  name: nameController.text,\n                  description: descController.text,\n                  price: double.tryParse(priceController.text) ?? 0,\n                  category: categoryController.text.isEmpty\n                      ? 'Other'\n                      : categoryController.text,\n                  imageUrl: 'https://via.placeholder.com/300x200',\n                  restaurantId: 'rest1',\n                );\n                setState(() {\n                  widget.foodService.addFoodItem(newItem);\n                });\n                Navigator.pop(context);\n              }\n            },\n            child: const Text('Add'),\n          ),\n        ],\n      ),\n    );\n  }\n\n  void _showEditDialog(FoodItem item) {\n    final nameController = TextEditingController(text: item.name);\n    final descController = TextEditingController(text: item.description);\n    final priceController = TextEditingController(text: item.price.toString());\n    final categoryController = TextEditingController(text: item.category);\n\n    showDialog(\n      context: context,\n      builder: (context) => AlertDialog(\n        title: const Text('Edit Product'),\n        content: SingleChildScrollView(\n          child: Column(\n            mainAxisSize: MainAxisSize.min,\n            children: [\n              TextField(\n                controller: nameController,\n                decoration: const InputDecoration(labelText: 'Name'),\n              ),\n              TextField(\n                controller: descController,\n                decoration: const InputDecoration(labelText: 'Description'),\n                maxLines: 2,\n              ),\n              TextField(\n                controller: priceController,\n                decoration: const InputDecoration(labelText: 'Price'),\n                keyboardType: TextInputType.number,\n              ),\n              TextField(\n                controller: categoryController,\n                decoration: const InputDecoration(labelText: 'Category'),\n              ),\n            ],\n          ),\n        ),\n        actions: [\n          TextButton(\n            onPressed: () => Navigator.pop(context),\n            child: const Text('Cancel'),\n          ),\n          TextButton(\n            onPressed: () {\n              final updatedItem = item.copyWith(\n                name: nameController.text,\n                description: descController.text,\n                price: double.tryParse(priceController.text) ?? item.price,\n                category: categoryController.text,\n              );\n              setState(() {\n                widget.foodService.updateFoodItem(updatedItem);\n              });\n              Navigator.pop(context);\n            },\n            child: const Text('Save'),\n          ),\n        ],\n      ),\n    );\n  }\n\n  void _showDeleteConfirmation(FoodItem item) {\n    showDialog(\n      context: context,\n      builder: (context) => AlertDialog(\n        title: const Text('Delete Product'),\n        content: Text('Are you sure you want to delete ${item.name}?'),\n        actions: [\n          TextButton(\n            onPressed: () => Navigator.pop(context),\n            child: const Text('Cancel'),\n          ),\n          TextButton(\n            onPressed: () {\n              setState(() {\n                widget.foodService.deleteFoodItem(item.id);\n              });\n              Navigator.pop(context);\n            },\n            style: TextButton.styleFrom(foregroundColor: Colors.red),\n            child: const Text('Delete'),\n          ),\n        ],\n      ),\n    );\n  }\n}\n