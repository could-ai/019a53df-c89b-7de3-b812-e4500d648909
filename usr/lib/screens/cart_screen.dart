import 'package:flutter/material.dart';\nimport '../services/cart_service.dart';\nimport '../widgets/cart_item_widget.dart';\n\nclass CartScreen extends StatefulWidget {\n  const CartScreen({super.key});\n\n  @override\n  State<CartScreen> createState() => _CartScreenState();\n}\n\nclass _CartScreenState extends State<CartScreen> {\n  final CartService _cartService = CartService();\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('My Cart'),\n        backgroundColor: Theme.of(context).colorScheme.primaryContainer,\n      ),\n      body: _cartService.items.isEmpty\n          ? Center(\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.center,\n                children: [\n                  Icon(\n                    Icons.shopping_cart_outlined,\n                    size: 100,\n                    color: Colors.grey[400],\n                  ),\n                  const SizedBox(height: 16),\n                  Text(\n                    'Your cart is empty',\n                    style: TextStyle(\n                      fontSize: 20,\n                      color: Colors.grey[600],\n                      fontWeight: FontWeight.w500,\n                    ),\n                  ),\n                  const SizedBox(height: 8),\n                  Text(\n                    'Add some delicious food to get started!',\n                    style: TextStyle(\n                      fontSize: 14,\n                      color: Colors.grey[500],\n                    ),\n                  ),\n                  const SizedBox(height: 24),\n                  ElevatedButton.icon(\n                    onPressed: () {\n                      Navigator.pop(context);\n                    },\n                    icon: const Icon(Icons.restaurant_menu),\n                    label: const Text('Browse Menu'),\n                    style: ElevatedButton.styleFrom(\n                      padding: const EdgeInsets.symmetric(\n                        horizontal: 24,\n                        vertical: 12,\n                      ),\n                    ),\n                  ),\n                ],\n              ),\n            )\n          : Column(\n              children: [\n                Expanded(\n                  child: ListView.builder(\n                    padding: const EdgeInsets.all(16),\n                    itemCount: _cartService.items.length,\n                    itemBuilder: (context, index) {\n                      return CartItemWidget(\n                        cartItem: _cartService.items[index],\n                        cartService: _cartService,\n                      );\n                    },\n                  ),\n                ),\n                // Bottom summary\n                Container(\n                  padding: const EdgeInsets.all(16),\n                  decoration: BoxDecoration(\n                    color: Colors.white,\n                    boxShadow: [\n                      BoxShadow(\n                        color: Colors.black.withOpacity(0.1),\n                        blurRadius: 10,\n                        offset: const Offset(0, -2),\n                      ),\n                    ],\n                  ),\n                  child: SafeArea(\n                    child: Column(\n                      children: [\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            const Text(\n                              'Subtotal:',\n                              style: TextStyle(\n                                fontSize: 16,\n                                fontWeight: FontWeight.w500,\n                              ),\n                            ),\n                            Text(\n                              '\$${_cartService.totalAmount.toStringAsFixed(2)}',\n                              style: const TextStyle(\n                                fontSize: 16,\n                                fontWeight: FontWeight.w500,\n                              ),\n                            ),\n                          ],\n                        ),\n                        const SizedBox(height: 16),\n                        SizedBox(\n                          width: double.infinity,\n                          child: ElevatedButton(\n                            onPressed: () {\n                              _showCheckoutDialog(context);\n                            },\n                            style: ElevatedButton.styleFrom(\n                              padding: const EdgeInsets.symmetric(vertical: 16),\n                              backgroundColor: Theme.of(context).colorScheme.primary,\n                              foregroundColor: Colors.white,\n                            ),\n                            child: Text(\n                              'Checkout (\$${_cartService.totalAmount.toStringAsFixed(2)})',\n                              style: const TextStyle(\n                                fontSize: 18,\n                                fontWeight: FontWeight.bold,\n                              ),\n                            ),\n                          ),\n                        ),\n                      ],\n                    ),\n                  ),\n                ),\n              ],\n            ),\n    );\n  }\n\n  void _showCheckoutDialog(BuildContext context) {\n    showDialog(\n      context: context,\n      builder: (context) => AlertDialog(\n        title: const Text('Order Confirmed!'),\n        content: Column(\n          mainAxisSize: MainAxisSize.min,\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            const Text('Thank you for your order!'),\n            const SizedBox(height: 8),\n            Text(\n              'Total: \$${_cartService.totalAmount.toStringAsFixed(2)}',\n              style: const TextStyle(fontWeight: FontWeight.bold),\n            ),\n            const SizedBox(height: 8),\n            const Text('Your food will be delivered soon.'),\n          ],\n        ),\n        actions: [\n          TextButton(\n            onPressed: () {\n              _cartService.clearCart();\n              Navigator.pop(context);\n              Navigator.pop(context);\n            },\n            child: const Text('OK'),\n          ),\n        ],\n      ),\n    );\n  }\n}\n