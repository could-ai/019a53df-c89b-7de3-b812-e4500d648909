import 'package:flutter/material.dart';\nimport '../services/food_service.dart';\nimport '../services/cart_service.dart';\nimport '../widgets/food_item_card.dart';\n\nclass HomeScreen extends StatefulWidget {\n  const HomeScreen({super.key});\n\n  @override\n  State<HomeScreen> createState() => _HomeScreenState();\n}\n\nclass _HomeScreenState extends State<HomeScreen> {\n  final FoodService _foodService = FoodService();\n  final CartService _cartService = CartService();\n  String? _selectedCategory;\n\n  @override\n  Widget build(BuildContext context) {\n    final categories = _foodService.categories;\n    final foodItems = _selectedCategory == null\n        ? _foodService.foodItems.where((item) => item.isAvailable).toList()\n        : _foodService.getFoodItemsByCategory(_selectedCategory!);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Food Delivery'),\n        backgroundColor: Theme.of(context).colorScheme.primaryContainer,\n        actions: [\n          Stack(\n            children: [\n              IconButton(\n                icon: const Icon(Icons.shopping_cart),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/cart');\n                },\n              ),\n              if (_cartService.itemCount > 0)\n                Positioned(\n                  right: 8,\n                  top: 8,\n                  child: Container(\n                    padding: const EdgeInsets.all(4),\n                    decoration: BoxDecoration(\n                      color: Colors.red,\n                      borderRadius: BorderRadius.circular(10),\n                    ),\n                    constraints: const BoxConstraints(\n                      minWidth: 20,\n                      minHeight: 20,\n                    ),\n                    child: Text(\n                      '${_cartService.itemCount}',\n                      style: const TextStyle(\n                        color: Colors.white,\n                        fontSize: 12,\n                        fontWeight: FontWeight.bold,\n                      ),\n                      textAlign: TextAlign.center,\n                    ),\n                  ),\n                ),\n            ],\n          ),\n          IconButton(\n            icon: const Icon(Icons.admin_panel_settings),\n            onPressed: () {\n              Navigator.pushNamed(context, '/admin');\n            },\n            tooltip: 'Restaurant Admin',\n          ),\n        ],\n      ),\n      body: Column(\n        children: [\n          // Category filter\n          Container(\n            height: 60,\n            padding: const EdgeInsets.symmetric(vertical: 8),\n            child: ListView(\n              scrollDirection: Axis.horizontal,\n              padding: const EdgeInsets.symmetric(horizontal: 16),\n              children: [\n                Padding(\n                  padding: const EdgeInsets.only(right: 8),\n                  child: FilterChip(\n                    label: const Text('All'),\n                    selected: _selectedCategory == null,\n                    onSelected: (selected) {\n                      setState(() {\n                        _selectedCategory = null;\n                      });\n                    },\n                  ),\n                ),\n                ...categories.map((category) => Padding(\n                      padding: const EdgeInsets.only(right: 8),\n                      child: FilterChip(\n                        label: Text(category),\n                        selected: _selectedCategory == category,\n                        onSelected: (selected) {\n                          setState(() {\n                            _selectedCategory = selected ? category : null;\n                          });\n                        },\n                      ),\n                    )),\n              ],\n            ),\n          ),\n          // Food items grid\n          Expanded(\n            child: foodItems.isEmpty\n                ? const Center(\n                    child: Text(\n                      'No items available',\n                      style: TextStyle(fontSize: 18, color: Colors.grey),\n                    ),\n                  )\n                : GridView.builder(\n                    padding: const EdgeInsets.all(16),\n                    gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(\n                      crossAxisCount: 2,\n                      childAspectRatio: 0.75,\n                      crossAxisSpacing: 16,\n                      mainAxisSpacing: 16,\n                    ),\n                    itemCount: foodItems.length,\n                    itemBuilder: (context, index) {\n                      return FoodItemCard(\n                        foodItem: foodItems[index],\n                        cartService: _cartService,\n                      );\n                    },\n                  ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n