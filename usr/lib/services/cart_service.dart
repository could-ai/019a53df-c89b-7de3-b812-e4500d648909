import 'package:flutter/foundation.dart';\nimport '../models/cart_item.dart';\nimport '../models/food_item.dart';\n\nclass CartService extends ChangeNotifier {\n  final List<CartItem> _items = [];\n\n  List<CartItem> get items => List.unmodifiable(_items);\n\n  int get itemCount => _items.fold(0, (sum, item) => sum + item.quantity);\n\n  double get totalAmount => _items.fold(0.0, (sum, item) => sum + item.totalPrice);\n\n  void addToCart(FoodItem foodItem) {\n    final existingIndex = _items.indexWhere((item) => item.foodItem.id == foodItem.id);\n    \n    if (existingIndex >= 0) {\n      _items[existingIndex].quantity++;\n    } else {\n      _items.add(CartItem(foodItem: foodItem));\n    }\n    notifyListeners();\n  }\n\n  void removeFromCart(String foodItemId) {\n    _items.removeWhere((item) => item.foodItem.id == foodItemId);\n    notifyListeners();\n  }\n\n  void updateQuantity(String foodItemId, int quantity) {\n    if (quantity <= 0) {\n      removeFromCart(foodItemId);\n      return;\n    }\n\n    final index = _items.indexWhere((item) => item.foodItem.id == foodItemId);\n    if (index >= 0) {\n      _items[index].quantity = quantity;\n      notifyListeners();\n    }\n  }\n\n  void clearCart() {\n    _items.clear();\n    notifyListeners();\n  }\n\n  bool isInCart(String foodItemId) {\n    return _items.any((item) => item.foodItem.id == foodItemId);\n  }\n\n  int getQuantity(String foodItemId) {\n    final item = _items.firstWhere(\n      (item) => item.foodItem.id == foodItemId,\n      orElse: () => CartItem(foodItem: FoodItem(\n        id: '',\n        name: '',\n        description: '',\n        price: 0,\n        category: '',\n        imageUrl: '',\n        restaurantId: '',\n      ), quantity: 0),\n    );\n    return item.quantity;\n  }\n}\n